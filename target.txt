// TODO - conventions about response codes etc
// TODO - Research node.js service/REST testing
// TODO - Use https://github.com/flatiron/nconf, particularly to control per-request logging.
// TODO - Refactor index.js

//require('namespaces')('request.middleware')
//restrictToAuthenticated = namespace('middleware').restrictToAuthenticated #require('./middleware/restrictToAuthenticated')
//requirements: [restrictToAuthenticated]
//       , {
//            destroy: function(id) {
//                // TODO - Write to @response
//            }
//        },
//        {
//            put: function(id) {
//                // TODO - Write to @response
//            }
//        },
//        {
//            http: {url: '/read', method: "PUT"},
//            markAsRead: function(id) {
//                // TODO - Write to @response
//            }
//        }


* CODE *
broadway = require('broadway')

namespace = require('require-namespace')
restrictToAuthenticated = namespace('middleware').restrictToAuthenticated //require('./middleware/restrictToAuthenticated')

new Resource
    uri: "/readinglist/:id"
    requirements: [restrictToAuthenticated]
    cache: 
      years : 10
      where: private
        
    respondsTo:
        get: (id) ->
          ...
      ,
        http: [uri: '/read']
        markAsRead: (id) ->
          ...

module.exports = new CollectionResource
  uri: "/readinglist"
  requirements: [restrictToAuthenticated]
  cache: 
    minutes : 10
    where: private
    vary-by: user

  respondsTo:
      create: (item) ->
          ...
    ,
      get: () ->
        ... 
    


#require('namespaces')('request.middleware')
#restrictToAuthenticated = namespace('middleware').restrictToAuthenticated #require('./middleware/restrictToAuthenticated')
#
#new Resource
#  uri: "/readinglist/:id"
#  requirements: [restrictToAuthenticated]
#  cache:
#    years : 10
#    where: private
#
#  respondsTo:
#    {
#    get: (id) ->
#      # TODO - Write to @response  
#    },
#  {
#  http: [uri: '/read']
#  markAsRead: (id) ->
#    # TODO - Write to @response
#  }

    
